

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>看懂UML类图和时序图 &mdash; Graphic Design Patterns</title>
  

  
  

  
  <link href="_static/css/font_lato_googleapi.css" type='text/css'>
  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Graphic Design Patterns" href="index.html"/>
        <link rel="next" title="创建型模式" href="creational_patterns/creational.html"/>
        <link rel="prev" title="图说设计模式" href="index.html"/> 

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Graphic Design Patterns</a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">看懂UML类图和时序图</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">从一个示例开始</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">类之间的关系</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">时序图</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">附录</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="creational_patterns/creational.html">创建型模式</a><ul>
<li class="toctree-l2"><a class="reference internal" href="creational_patterns/simple_factory.html">1. 简单工厂模式( Simple Factory Pattern )</a></li>
<li class="toctree-l2"><a class="reference internal" href="creational_patterns/factory_method.html">2. 工厂方法模式(Factory Method Pattern)</a></li>
<li class="toctree-l2"><a class="reference internal" href="creational_patterns/abstract_factory.html">3. 抽象工厂模式(Abstract Factory)</a></li>
<li class="toctree-l2"><a class="reference internal" href="creational_patterns/builder.html">4. 建造者模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="creational_patterns/singleton.html">5. 单例模式</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structural_patterns/structural.html">结构型模式</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structural_patterns/adapter.html">1. 适配器模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="structural_patterns/bridge.html">2. 桥接模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="structural_patterns/decorator.html">3. 装饰模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="structural_patterns/facade.html">4. 外观模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="structural_patterns/flyweight.html">5. 享元模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="structural_patterns/proxy.html">6. 代理模式</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="behavioral_patterns/behavioral.html">行为型模式</a><ul>
<li class="toctree-l2"><a class="reference internal" href="behavioral_patterns/command.html">1. 命令模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavioral_patterns/mediator.html">2. 中介者模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavioral_patterns/observer.html">3. 观察者模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavioral_patterns/state.html">4. 状态模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavioral_patterns/strategy.html">5. 策略模式</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Graphic Design Patterns</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>看懂UML类图和时序图</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/read_uml.rst.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <section id="uml">
<span id="read-uml"></span><h1>看懂UML类图和时序图<a class="headerlink" href="#uml" title="Permalink to this headline">¶</a></h1>
<p>这里不会将UML的各种元素都提到，我只想讲讲类图中各个类之间的关系；
能看懂类图中各个类之间的线条、箭头代表什么意思后，也就足够应对
日常的工作和交流；
同时，我们应该能将类图所表达的含义和最终的代码对应起来；
有了这些知识，看后面章节的设计模式结构图就没有什么问题了；</p>
<p>本章所有图形使用Enterprise Architect 9.2来画,所有示例详见根目录下的design_patterns.EAP</p>
<section id="id1">
<h2>从一个示例开始<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>请看以下这个类图，类之间的关系是我们需要关注的：</p>
<img alt="_images/uml_class_struct.jpg" src="_images/uml_class_struct.jpg" />
<ul class="simple">
<li><p>车的类图结构为&lt;&lt;abstract&gt;&gt;，表示车是一个抽象类；</p></li>
<li><p>它有两个继承类：小汽车和自行车；它们之间的关系为实现关系，使用带空心箭头的虚线表示；</p></li>
<li><p>小汽车为与SUV之间也是继承关系，它们之间的关系为泛化关系，使用带空心箭头的实线表示；</p></li>
<li><p>小汽车与发动机之间是组合关系，使用带实心箭头的实线表示；</p></li>
<li><p>学生与班级之间是聚合关系，使用带空心箭头的实线表示；</p></li>
<li><p>学生与身份证之间为关联关系，使用一根实线表示；</p></li>
<li><p>学生上学需要用到自行车，与自行车是一种依赖关系，使用带箭头的虚线表示；</p></li>
</ul>
<p>下面我们将介绍这六种关系；</p>
</section>
<hr class="docutils" />
<section id="id2">
<h2>类之间的关系<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<section id="generalization">
<h3>泛化关系(generalization)<a class="headerlink" href="#generalization" title="Permalink to this headline">¶</a></h3>
<p>类的继承结构表现在UML中为：泛化(generalize)与实现(realize)：</p>
<p>继承关系为 is-a的关系；两个对象之间如果可以用 is-a 来表示，就是继承关系：（..是..)</p>
<p>eg：自行车是车、猫是动物</p>
<p>泛化关系用一条带空心箭头的直接表示；如下图表示（A继承自B）；</p>
<img alt="_images/uml_generalization.jpg" src="_images/uml_generalization.jpg" />
<p>eg：汽车在现实中有实现，可用汽车定义具体的对象；汽车与SUV之间为泛化关系；</p>
<img alt="_images/uml_generalize.jpg" src="_images/uml_generalize.jpg" />
<p>注：最终代码中，泛化关系表现为继承非抽象类；</p>
</section>
<section id="realize">
<h3>实现关系(realize)<a class="headerlink" href="#realize" title="Permalink to this headline">¶</a></h3>
<p>实现关系用一条带空心箭头的虚线表示；</p>
<p>eg：”车”为一个抽象概念，在现实中并无法直接用来定义对象；只有指明具体的子类(汽车还是自行车)，才
可以用来定义对象（”车”这个类在C++中用抽象类表示，在JAVA中有接口这个概念，更容易理解）</p>
<img alt="_images/uml_realize.jpg" src="_images/uml_realize.jpg" />
<p>注：最终代码中，实现关系表现为继承抽象类；</p>
</section>
<section id="aggregation">
<h3>聚合关系(aggregation)<a class="headerlink" href="#aggregation" title="Permalink to this headline">¶</a></h3>
<p>聚合关系用一条带空心菱形箭头的直线表示，如下图表示A聚合到B上，或者说B由A组成；</p>
<img alt="_images/uml_aggregation.jpg" src="_images/uml_aggregation.jpg" />
<p>聚合关系用于表示实体对象之间的关系，表示整体由部分构成的语义；例如一个部门由多个员工组成；</p>
<p>与组合关系不同的是，整体和部分不是强依赖的，即使整体不存在了，部分仍然存在；例如，
部门撤销了，人员不会消失，他们依然存在；</p>
</section>
<section id="composition">
<h3>组合关系(composition)<a class="headerlink" href="#composition" title="Permalink to this headline">¶</a></h3>
<p>组合关系用一条带实心菱形箭头直线表示，如下图表示A组成B，或者B由A组成；</p>
<img alt="_images/uml_composition.jpg" src="_images/uml_composition.jpg" />
<p>与聚合关系一样，组合关系同样表示整体由部分构成的语义；比如公司由多个部门组成；</p>
<p>但组合关系是一种强依赖的特殊聚合关系，如果整体不存在了，则部分也不存在了；例如，
公司不存在了，部门也将不存在了；</p>
</section>
<section id="association">
<h3>关联关系(association)<a class="headerlink" href="#association" title="Permalink to this headline">¶</a></h3>
<p>关联关系是用一条直线表示的；它描述不同类的对象之间的结构关系；它是一种静态关系，
通常与运行状态无关，一般由常识等因素决定的；它一般用来定义对象之间静态的、天然的结构；
所以，关联关系是一种“强关联”的关系；</p>
<p>比如，乘车人和车票之间就是一种关联关系；学生和学校就是一种关联关系；</p>
<p>关联关系默认不强调方向，表示对象间相互知道；如果特别强调方向，如下图，表示A知道B，但
B不知道A；</p>
<img alt="_images/uml_association.jpg" src="_images/uml_association.jpg" />
<p>注：在最终代码中，关联对象通常是以成员变量的形式实现的；</p>
</section>
<section id="dependency">
<h3>依赖关系(dependency)<a class="headerlink" href="#dependency" title="Permalink to this headline">¶</a></h3>
<p>依赖关系是用一套带箭头的虚线表示的；如下图表示A依赖于B；他描述一个对象在运行期间会用到另一个对象的关系；</p>
<img alt="_images/uml_dependency.jpg" src="_images/uml_dependency.jpg" />
<p>与关联关系不同的是，它是一种临时性的关系，通常在运行期间产生，并且随着运行时的变化；
依赖关系也可能发生变化；</p>
<p>显然，依赖也有方向，双向依赖是一种非常糟糕的结构，我们总是应该保持单向依赖，杜绝双向依赖的产生；</p>
<p>注：在最终代码中，依赖关系体现为类构造方法及类方法的传入参数，箭头的指向为调用关系；依赖关系除了临时知道对方外，还是“使用”对方的方法和属性；</p>
</section>
</section>
<section id="id3">
<h2>时序图<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>为了展示对象之间的交互细节，后续对设计模式解析的章节，都会用到时序图；</p>
<p>时序图（Sequence Diagram）是显示对象之间交互的图，这些对象是按时间顺序排列的。时序图中显示的是参与交互的对象及其对象之间消息交互的顺序。</p>
<p>时序图包括的建模元素主要有：对象（Actor）、生命线（Lifeline）、控制焦点（Focus of control）、消息（Message）等等。</p>
<p>关于时序图，以下这篇文章将概念介绍的比较详细；更多实例应用，参见后续章节模式中的时序图；</p>
<p><a class="reference external" href="http://smartlife.blog.51cto.com/1146871/284874">http://smartlife.blog.51cto.com/1146871/284874</a></p>
</section>
<section id="id4">
<h2>附录<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>在EA中定义一个抽象类（其版型为《abstract》)</p>
<img alt="_images/uml_AbatractClass.jpg" src="_images/uml_AbatractClass.jpg" />
</section>
</section>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="creational_patterns/creational.html" class="btn btn-neutral float-right" title="创建型模式">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="图说设计模式"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Colin http://blog.me115.com.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>